<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
        <div class="col-xs-12">
            <h4 class="modal-title pull-left">Jobsons Results</h4>  
            <button class="close pull-right" (click)="activeModal.dismiss('Cross click')">x</button>                
        </div>  
    </div>
    <div class="modal-body">
      <form #myForm="ngForm">
        <div class="form-group" style="width:100%;">
          <div class="initial-input">
            <label class="tight">Time of Spill:</label>
            <app-date-time-picker [(ngModel)]="dateModel" name="activeEndDate"></app-date-time-picker>
          </div>
          <div class="initial-input">
            <label class="tight">Spill Concentration (kilograms):</label>
            <input [(ngModel)]="SpillMass" (ngModelChange)="setConc($event)" type=number required placeholder="Value" name="spillmass" class="up">
          </div>
          <div class="input-with-icon initial-input spacer30">
              <label class="tight">Discharge (cubic meters per second):</label>
              <input [(ngModel)]="Discharge" (ngModelChange)="setDischarge($event)" type=number required placeholder="Select a gage from the map or enter a value" name="discharge" class="form-control tight">
              <div class="icon">
                <span class="fa fa-map-marker" (click)="activeModal.dismiss('Cross click')"></span>
              </div>
            </div>
        </div>
        <div id="block1">
                   
            <!--SHOW/HIDE REACHES PANEL-->
            <div (click)="showhideReaches()">
              <a ngClass="list-heading">{{showhidetitle}}<span class="floatright" [ngClass]="showhidetitle === 'Hide Reaches' ? 'fa fa-angle-right' : 'fa fa-angle-down'"></span></a>
            </div>        
          <div id="block2">
            <div *ngFor="let item of reachList; let i = index; trackBy:identify" id="{{i}}" [hidden]="showReaches">
              <!--REACH INFO-->
              <div class="reachlist">
                <div class="listrow">
                <p class="row" (click)="openCloseItem(i)">{{item.name}}</p><button class="remove" (click)="removeReach(i)">Remove</button>
                </div>
              </div>

              <!--Name input-->
              <div id="details" [hidden]="!item.parameters.show">
                <div *ngFor="let k of item | keyvalue;  let it1 = index; trackBy:customTrackBy">
                  <div class="space8" *ngIf="k.key === 'name'">
                    <!-- don't do anything with input condition-->
                    <label>{{getLabel(k.key)}}</label>
                    <input [(ngModel)]='item.name' placeholder="Name" name="name" type="text" ngControl="value" ngMaxlength="25" autocomplete="off">
                      
                  </div>
                </div> 

                <!--Description input-->
                <div *ngFor="let k of item | keyvalue; let it2 = index; trackBy:customTrackBy">
                  <div class="space8" *ngIf="k.key === 'description'">
                    <label>{{getLabel(k.key)}}</label>
                      <input [(ngModel)]="k.value" placeholder="value" name="{{k.key}}" type="text" ngControl="value" ngMaxlength="50" autocomplete="off">
                  </div>
                </div> 

                <!--Parameters input-->
                <div *ngFor="let pars of item.parameters;  let it3 = index; trackBy:customTrackBy">
                  <div *ngFor="let u of pars.unit | keyvalue;">
                    <div class="heading" *ngIf="u.key === 'unit'">
                      <label>{{pars.name}} ({{u.value}}):</label>
                    </div>
                  </div>
                  <div class="space8" *ngIf="pars.required === true">
                    <input [(ngModel)]="item.parameters[it3].value" placeholder="value" name="{{pars.name}}"
                            type=number ngControl="value" required autocomplete="off">
                  </div>
                  <div class="space8" *ngIf="pars.required === false">
                    <input [(ngModel)]='item.parameters[it3].value' placeholder="value" name="{{pars.name}}"
                            type=number ngControl="value" autocomplete="off">
                  </div>
                </div>
              </div> 
            </div>
          </div>
          <br />
          <div id="block3" class="center">
            <div class="btn-wrapper">
              <button *ngIf="mylist !== null" class="btn-red btn-main" (click)="onClick_clear()"><i class="fa fa-trash"></i>&nbsp;&nbsp;Clear</button>
              <button [disabled]="!myForm.form.valid" class="btn-blue btn-main" (click)="getResults()"><span [ngClass]="gettingResults ? 'fa fa-refresh fa-spin' : 'fa fa-check'"></span>{{ gettingResults ? '&nbsp;&nbsp;Calculating' : '&nbsp;&nbsp;Get Results' }}</button>
              <button class="btn-gray btn-main" (click)="activeModal.dismiss()"><i class="fa fa-window-close"></i>{{ StudyService.selectedStudy.totResults ? '&nbsp;&nbsp;View Results' : '&nbsp;&nbsp;Close' }}</button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
