<div class="sidebar">
  <div class="panel panel-default">
    <!--MAP LAYERS PANEL-->
    <div class="sidebar-item" (click)="SetProcedureType(0)">
      <a ngClass="list-group-item-maps">Map layers&nbsp;<span [ngClass]="SelectedProcedureType === 0 ? 'fa fa-angle-right' : 'fa fa-angle-down'"></span></a>
    </div>

    <div class="panel-body boundingbox" [hidden]="SelectedProcedureType !== 0">
      <!--BASE MAPS-->
      <div class="panel panel-primary">
        <div class="panel-heading pointerCursor" (click)="ishiddenBasemaps= !ishiddenBasemaps">
          <h5 class="panel-title pointerCursor">Base maps&nbsp;&nbsp;<span [ngClass]="!ishiddenBasemaps ? 'fa fa-angle-right' : 'fa fa-angle-down'"></span></h5>
        </div>
      </div>

      <div class="panel-body" [hidden]="ishiddenBasemaps">
        <!-- if selected procedure type 1 or 2 set expanded-->
        <label *ngFor="let item of baselayers" class="map-layer">
          <div *ngIf="item.visible; else disabled" class="map-layer-check">
            <input type="radio" name="mapLayer" (change)="SetBaselayer(item.name);"
                   [checked]="item.name">
          </div>
          <ng-template #disabled>
            <div class="map-layer-check">
              <input type="radio" name="mapLayer" (change)="model.baselayers === item.name; SetBaselayer(item.name);">
            </div>
          </ng-template>
          <span class="map-layer-title">{{item.name}}</span>
        </label>
      </div>
      <!--END BASE MAPS-->
      <!--OVERLAYS-->
      <div class="panel panel-primary">
        <div class="panel-heading pointerCursor">
          <h5 class="panel-title">Overlays&nbsp;&nbsp;<span class="fa fa-angle-right"></span></h5>
        </div>
      </div>

      <div class="panel-body" [hidden]="ishiddenOverlay">
        <label *ngFor="let item of overlays" class="map-layer">
          <div *ngIf="item.visible; else disabled" class="map-layer-check">
            <input type="checkbox" name="options" (change)="model.overlays === item.name; SetOverlay(item.name);"
                   [checked]="item.name">
          </div>
          <ng-template #disabled>
            <div class="map-layer-check">
              <input type="checkbox" name="options" (change)="model.overlays === item.name; SetOverlay(item.name);"
                     [checked]="item.name === model.overlays">
            </div>
          </ng-template>
          <span class="map-layer-title">{{item.name}}</span>
        </label>
      </div>
      <!--END OVERLAYS-->
      
    </div>
    <!--END MAP LAYERS PANEL-->

    <!--IDENTIFY AREA PANEL-->
    <div class="sidebar-item" (click)="SetProcedureType(1)">
      <a [ngClass]="GetClass(1)">IDENTIFY AREA&nbsp;<span [ngClass]="SelectedProcedureType === 1 ? 'fa fa-angle-right' : 'fa fa-angle-down'"></span></a>
    </div>

    <div class="panel-body" [hidden]="SelectedProcedureType !== 1">
      <div class="startover_wrapper" *ngIf="StudyService.GetWorkFlow('hasReaches')">
        <button class="startover" mat-raised-button (click)="reset()"><i class="fa fa-undo"></i>&nbsp;&nbsp;Start Over</button>
        <br />
      </div>
      <div *ngIf="ZoomLevel < 10">
        <div class="shadowtext">
          <b>Step 1:</b> Use the map or the search tool below to identify an area of interest. At zoom level 10 or greater, trace methods will be enabled.
        </div>
      </div>
      <div *ngIf="ZoomLevel > 9">
        <div class="shadowtext"><b>Step 2:</b> You have zoomed in sufficiently to select a trace method. Select an option below then click or tap a point on the map.</div>
      </div>

      <div id="searchWrapper">

        <div id="searchBox"></div>

        <button class="btn-link fullwidth" (click)="showSearchHelp = !showSearchHelp">
          <span class="top" [hidden]="showSearchHelp"><i class="fa fa-question-circle"></i> Help</span>
          <span class="top" [hidden]="!showSearchHelp"><i class="fa fa-close"></i> Close Help</span>
        </button>

        <!-- supported search strings -->
        <div class="banner info banner-no-icon" [hidden]="!showSearchHelp" style="margin-top: 0px;">
          <div class="banner-body">
            <h5>Supported search strings:</h5>
            <p>
              <br />
              GNIS locations<br />
              USGS Sites<br />
              Zip Codes<br />
              Area Codes<br />
              States<br />
              Lat/Long ('43.9,-72.1' or '43.9N,72.1W')<br />
              Street Address<br />
              Hydrologic Unit<br />
              <br />
              Search provided by<br /><a href="https://txpub.usgs.gov/dss/search_api/2.0/" target="_blank" style="text-decoration:underline !important; padding: 0 !important;">USGS Search JavaScript API</a>
            </p>
          </div>
        </div><!-- End supported search strings -->
      </div>

      <div id="methods" class="button-wrapper">
        <button id="response" [disabled]="!StudyService.GetWorkFlow('reachedZoom')" (click)="SetMethodType('response')"><span [ngClass]="StudyService.checkingDelineatedPoint && SelectedMethodType === 'response' ? 'fa fa-refresh fa-spin' : 'fa fa-map-marker'"></span>&nbsp;Spill Response</button><br />
        <button id="planning" [disabled]="true" (click)="SetMethodType('planning')"><span [ngClass]="StudyService.checkingDelineatedPoint && SelectedMethodType === 'planning' ? 'fa fa-refresh fa-spin' : 'fa fa-map-marker'"></span>&nbsp;Spill Planning</button>
      </div>
    </div>   
    <!--END IDENTIFY AREA PANEL--> 

    <!--SCENARIOS PANEL-->
    <div class="sidebar-item">
      <a [ngClass]="{
         'list-group-item-active': SelectedProcedureType === 2,
         'list-group-item' : SelectedProcedureType !== 2
         }" (click)="SetProcedureType(2)">SCENARIOS&nbsp;<span [ngClass]="SelectedProcedureType === 2 ? 'fa fa-angle-right' : 'fa fa-angle-down'"></span></a>
    </div>

    <div class="panel-body" [hidden]="SelectedProcedureType !== 2" *ngFor="let item of AvailableScenarioTypes">
      <div class="boundingbox">
        <label class="map-layer">
          <div class="map-layer-check">
            <input type="radio" name="scenario" id="scenario" [checked]="item.selected" (change)="ToggleScenario(item)" />         
          </div>
          <span class="map-layer-title">{{item.name}}</span>
        </label>
      </div>
      <div id="continue" class="button-wrapper">
        <button (click)="open(SelectedScenario)">Continue</button>
      </div>
    </div>
    <!--END SCENARIOS PANEL-->

    <!--BUILD REPORT PANEL-->
    <div class="sidebar-item">
      <a [ngClass]="{
         'list-group-item-active': SelectedProcedureType === 3,
         'list-group-item' : SelectedProcedureType !== 3}" (click)="SetProcedureType(3)">BUILD REPORT&nbsp;<span [ngClass]="SelectedProcedureType === 3 ? 'fa fa-angle-right' : 'fa fa-angle-down'"></span></a>
    </div>
    <div class="panel-body" [hidden]="SelectedProcedureType !== 3">
        <div *ngIf="!CanContinue">
          <div class="shadowtext">
            <b>Step 1:</b> Select report components below.
          </div>
        </div>
        <div *ngIf="CanContinue">
            <div class="shadowtext">
              <b>Step 2:</b> Click "Continue" to proceed.
            </div>
          </div>
      <div class="boundingbox">
        <label class="map-layer" *ngFor="let option of StudyService.ReportOptions; let i = index; trackBy:identify">
          <div class="map-layer-check">
            <input type="checkbox" name="report" id="report" [checked]="option.checked" (change)="ToggleReportOptions(i)" />
          </div>
          <span class="map-layer-title">{{option.name}}</span>
        </label>
      </div>
      <div id="continue" class="button-wrapper">
        <button [ngClass]="!CanContinue ? 'gray' : ''" (click)="open('Report')">Continue</button>
      </div>
    </div>
  </div>
</div>
